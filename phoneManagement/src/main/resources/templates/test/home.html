<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Test Home</title>
    <meta name="_csrf_header" th:content="${_csrf.headerName}">
    <meta name="_csrf" th:content="${_csrf.token}">

    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
</head>
<body>
<script>
    const header = $("meta[name='_csrf_header']").attr('content');
    const token = $("meta[name='_csrf']").attr('content');

    function post(){
        var data = {
            name: 'Hee Chan'
        };
        var rst = "";

        $.ajax({
            url: '/test/post',
            type: 'post',
            contentType: 'application/json',
            data: JSON.stringify(data),
            async: false,
            beforeSend: function (xhr){
                xhr.setRequestHeader(header, token);
                console.log("before: "+rst);
            },
            success: function (result){
                rst = result;
                console.log("success: "+rst);
            },
            error: function (error){
                console.log(error);
            },
            complete: function (ret){
                console.log("complete: "+rst);
            }
        });
       console.log("final: "+rst);
    }

    function get(){
        var rst = "";

        var jqXHR = $.ajax({
            url: '/test/get?name=Chan',
            type: 'get',
            async: false,
            success: function (result){
                rst = result;
                console.log("success: "+rst);
            },
            error: function (error){
                console.log(error);
            }
        });
        console.log("final: "+rst);
        console.log("jqXHR: "+jqXHR.success());
    }
</script>
<a th:href="@{/test/search}">검색 테스트</a>
<button type="button" class="btn btn-primary" onclick="post()">POST</button>
<button type="button" class="btn btn-primary" onclick="get()">GET</button>
</body>
</html>